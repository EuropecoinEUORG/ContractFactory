// Factory "morphs" into a Pudding class.
// The reasoning is that calling load in each context
// is cumbersome.

(function() {

  var contract_data = {
    abi: [{"constant":false,"inputs":[{"name":"_name","type":"bytes32"}],"name":"addProposal","outputs":[],"type":"function"},{"constant":true,"inputs":[],"name":"proposalsCount","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"constant":true,"inputs":[],"name":"tokenLedger","outputs":[{"name":"","type":"address"}],"type":"function"},{"constant":false,"inputs":[{"name":"_id","type":"uint256"},{"name":"_eth","type":"uint256"}],"name":"setProposalFund","outputs":[],"type":"function"},{"constant":false,"inputs":[{"name":"_id","type":"uint256"},{"name":"_name","type":"bytes32"}],"name":"updateProposal","outputs":[],"type":"function"},{"constant":true,"inputs":[{"name":"_id","type":"uint256"}],"name":"getProposal","outputs":[{"name":"_name","type":"bytes32"},{"name":"_eth","type":"uint256"}],"type":"function"},{"constant":false,"inputs":[{"name":"_amount","type":"uint256"}],"name":"generateTokens","outputs":[],"type":"function"},{"constant":false,"inputs":[{"name":"upgradedOrganisation_","type":"address"}],"name":"kill","outputs":[],"type":"function"},{"constant":false,"inputs":[{"name":"_id","type":"uint256"}],"name":"fundProposal","outputs":[],"type":"function"},{"constant":true,"inputs":[{"name":"_account","type":"address"}],"name":"getBalance","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"inputs":[{"name":"_tokenLedger","type":"address"}],"type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"id","type":"uint256"},{"indexed":false,"name":"when","type":"uint256"}],"name":"ProposalAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"id","type":"uint256"},{"indexed":false,"name":"when","type":"uint256"}],"name":"ProposalUpdated","type":"event"}],
    binary: "60606040526040516020806104df83395060806040525160018054600160a060020a03191682179055506104a8806100376000396000f3606060405236156100825760e060020a600035046306efe3b081146100845780630a9f46ad146100d25780633886c957146100e8578063460a7050146100fa5780635ba2177114610141578063c7f758a8146101ba578063ca01ba391461022e578063cbf0b0c014610290578063e210f4b514610356578063f8b2cb4f14610399575b005b610082600435600080546001810180835582908280158290116104055760020281600202836000526020600020918201910161040591905b808211156104a4578481556001018481556100bc565b6000545b60408051918252519081900360200190f35b6103ee600154600160a060020a031681565b610082600435602435806000600050838154811015610002575080525060029091027f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5640155565b6100826004356024358060006000508381548110156100025750808052600284027f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563019050556060828152426080527fd0d48d54a7ebcfcfd76018524c8d822767ac6f81ca7171b01511c2b53b35971a90604090a15050565b6103f86004356000600060006000600050848154811015610002575050508052507f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5636002909102908101547f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e564909101549091565b6100826004356001547fca01ba390000000000000000000000000000000000000000000000000000000060609081526064839052600160a060020a039091169063ca01ba399060849060009060248183876161da5a03f1156100025750505050565b61008260043560015460e060020a6370a0823102606090815230600160a060020a0390811660645260009216906370a082319060849060209060248187876161da5a03f1156100025750506040805180516001547fa9059cbb000000000000000000000000000000000000000000000000000000008352600160a060020a03808816600485015260248401839052935191959316935063a9059cbb92604480840193919291829003018183876161da5a03f1156100025750505081600160a060020a0316ff5b6100826004353460006000508281548110156100025750805260029091027f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5640155565b6100d660043560015460e060020a6370a08231026060908152600160a060020a0380841660645260009216906370a082319060849060209060248187876161da5a03f115610002575050604051519392505050565b6060908152602090f35b6060918252608052604090f35b50505090506040604051908101604052808381526020016000815260200150600060005082815481101561000257906000526020600020906002020160005060008201518160000160005055602082015181600101600050559050507fcf9af864fe793f8ab30e13cdc3475afd6ccb7896eef43ce2aaecaa97711310ad8142604051808381526020018281526020019250505060405180910390a15050565b509056",
    unlinked_binary: "60606040526040516020806104df83395060806040525160018054600160a060020a03191682179055506104a8806100376000396000f3606060405236156100825760e060020a600035046306efe3b081146100845780630a9f46ad146100d25780633886c957146100e8578063460a7050146100fa5780635ba2177114610141578063c7f758a8146101ba578063ca01ba391461022e578063cbf0b0c014610290578063e210f4b514610356578063f8b2cb4f14610399575b005b610082600435600080546001810180835582908280158290116104055760020281600202836000526020600020918201910161040591905b808211156104a4578481556001018481556100bc565b6000545b60408051918252519081900360200190f35b6103ee600154600160a060020a031681565b610082600435602435806000600050838154811015610002575080525060029091027f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5640155565b6100826004356024358060006000508381548110156100025750808052600284027f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563019050556060828152426080527fd0d48d54a7ebcfcfd76018524c8d822767ac6f81ca7171b01511c2b53b35971a90604090a15050565b6103f86004356000600060006000600050848154811015610002575050508052507f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5636002909102908101547f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e564909101549091565b6100826004356001547fca01ba390000000000000000000000000000000000000000000000000000000060609081526064839052600160a060020a039091169063ca01ba399060849060009060248183876161da5a03f1156100025750505050565b61008260043560015460e060020a6370a0823102606090815230600160a060020a0390811660645260009216906370a082319060849060209060248187876161da5a03f1156100025750506040805180516001547fa9059cbb000000000000000000000000000000000000000000000000000000008352600160a060020a03808816600485015260248401839052935191959316935063a9059cbb92604480840193919291829003018183876161da5a03f1156100025750505081600160a060020a0316ff5b6100826004353460006000508281548110156100025750805260029091027f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5640155565b6100d660043560015460e060020a6370a08231026060908152600160a060020a0380841660645260009216906370a082319060849060209060248187876161da5a03f115610002575050604051519392505050565b6060908152602090f35b6060918252608052604090f35b50505090506040604051908101604052808381526020016000815260200150600060005082815481101561000257906000526020600020906002020160005060008201518160000160005055602082015181600101600050559050507fcf9af864fe793f8ab30e13cdc3475afd6ccb7896eef43ce2aaecaa97711310ad8142604051808381526020018281526020019250505060405180910390a15050565b509056",
    address: "0xe6f1226489656ccc7a60f61721065fb36c91f7e8",
    generated_with: "2.0.9",
    contract_name: "Organisation"
  };

  function Contract() {
    if (Contract.Pudding == null) {
      throw new Error("Organisation error: Please call load() first before creating new instance of this contract.");
    }

    Contract.Pudding.apply(this, arguments);
  };

  Contract.load = function(Pudding) {
    Contract.Pudding = Pudding;

    Pudding.whisk(contract_data, Contract);

    // Return itself for backwards compatibility.
    return Contract;
  }

  Contract.new = function() {
    if (Contract.Pudding == null) {
      throw new Error("Organisation error: Please call load() first before calling new().");
    }

    return Contract.Pudding.new.apply(Contract, arguments);
  };

  Contract.at = function() {
    if (Contract.Pudding == null) {
      throw new Error("Organisation error: Please call load() first before calling at().");
    }

    return Contract.Pudding.at.apply(Contract, arguments);
  };

  Contract.deployed = function() {
    if (Contract.Pudding == null) {
      throw new Error("Organisation error: Please call load() first before calling deployed().");
    }

    return Contract.Pudding.deployed.apply(Contract, arguments);
  };

  if (typeof module != "undefined" && typeof module.exports != "undefined") {
    module.exports = Contract;
  } else {
    // There will only be one version of Pudding in the browser,
    // and we can use that.
    window.Organisation = Contract;
  }

})();
